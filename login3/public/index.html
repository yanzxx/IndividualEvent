<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
<meta http-equiv="Content-Type" content="textml; charset=UTF-8">
<meta name="author" content="www.qtparking.com">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

		<title>720度全景模拟</title>
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/login.css" />
		<script type="text/javascript" src="js/jquery-1.8.0.js" ></script>
		
		<script type="text/javascript" src="js/index.js" ></script>
		
		<script language="javascript" type="text/javascript"> 
function dyniframesize(down) { 
var pTar = null; 
if (document.getElementById){ 
pTar = document.getElementById(down); 
} 
else{ 
eval('pTar = ' + down + ';'); 
} 
if (pTar && !window.opera){ 
//begin resizing iframe 
pTar.style.display="block" 
if (pTar.contentDocument && pTar.contentDocument.body.offsetHeight){ 
//ns6 syntax 
pTar.height = pTar.contentDocument.body.offsetHeight +20; 
//pTar.width = pTar.contentDocument.body.scrollWidth+20; 
} 
else if (pTar.Document && pTar.Document.body.scrollHeight){ 
//ie5+ syntax 
pTar.height = pTar.Document.body.scrollHeight; 
//pTar.width = pTar.Document.body.scrollWidth; 
} 
} 
} 
</script> 
	</head>
	<body>
		<div class="mark"></div>
		<header>
			<nav><span class="logo">720°</span>
			<a class="about" href="javascript:" >登录</a><a href="know.html" target="iframeMain">关于我们</a><a href="superiority.html" target="iframeMain">平台优势</a><a href="news.html" target="iframeMain">产品</a><a class="home" href="home.html" target="iframeMain">首页</a>
				</nav>
		</header>
		<div class="container">
			<div class="htmleaf-container">
		
		<div class="login-wrap">
			<div class="login-html">
				<input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">登录</label>
				<input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">注册</label>
				<div class="login-form">
					<div class="sign-in-htm">
						<form id="main" class="form-horizontal" method="post" name="form0">
						<div class="group">
							<label for="user" class="label">用户名</label>
							<label class="tips" id="uErr"></label>
							<input id="user" type="text" class="input dname" name="username">
						</div>
						<div class="group">
							<label for="pass" class="label">密码</label>
							<label class="tips" id="pErr"></label>
							<input id="pass" type="password" class="input"  name="password">
						</div>
						<div class="group">
							<input id="check" type="checkbox" class="check" checked>
							<label for="check"><span class="icon"></span> 记住密码</label>
						</div>
						<label class="tips wrong">用户名或密码错误!</label>
						<div class="group">
							<input type="button" class="button dl" id="login" value="登录" onclick="checkForm1()">
						</div>
						<div class="hr"></div>
						<!--<div class="foot-lnk">
							<a href="#forgot">Forgot Password?</a>
						</div>-->
						</form>
					</div>
					
					<div class="sign-up-htm">
						<form id="main" class="form-horizontal" method="post" novalidate onsubmit="return checkForm();" name="form1">
						<div class="group">
							<label for="username" class="label">用户名</label><label class="tip tipn" id="usernumErr"></label>
							<input id="username" type="text" class="input rname" 
							name="username" onblur="return checkUserName(this.value);">
						</div>
						<div class="group">
							<label for="password" class="label">密码</label><label class="tip tipp" id="passwordErr"></label>
							<input name="password2" id="password" type="password" class="input" onblur="return checkPwd(this.value);">
						</div>
						<div class="group">
							<label for="confirm-password" class="label">确认密码</label><label class="tip tipp" id="password2Err"></label>
							<input  type="password" class="input" data-type="password" name="password3" id="confirm-password" onblur="return confrimPwd(this.value);">
						</div>
						<div class="group">
							<label for="email" class="label">邮箱地址</label><label class="tip tipe" id="emailErr"></label>
							<input  type="text" class="input" id="email" name="email" onblur="return checkEmail(this.value);">
						</div>
						<div class="group">
							<input type="submit" class="button reg" value="注册">
						</div>
						<div class="hr"></div>
						
						</form>
					</div>
				</div>
			</div>
		</div>
		
	</div>
	<iframe  src ="home.html" frameborder="0" marginheight="0" marginwidth="0" frameborder="0" scrolling="no" id="ifm" name="iframeMain" onload="javascript:dyniframesize('ifm');" width="100%"> 
                </iframe>
			
		</div>
		<footer>
			
			<nav><a class="about" href="javascript:" >登录</a><a  href="know.html" target="iframeMain">关于我们</a><a href="superiority.html" target="iframeMain">平台优势</a><a href="news.html" target="iframeMain">产品</a><a class="home" href="home.html" target="iframeMain">首页</a>
				</nav>
		
			<div class="information">
				<span class="hr"></span>
					<ul class="address">
						<li>Copyright&copy;2015-2016</li>
						<li>北京迅奥科技有限公司版权所有 京ICP备12345678号-2</li>
						<li>地址：北京市海淀区西四环东冉村伊斯特大厦506</li>
					</ul>
					<span class="phonenum">010-62389230</span>
					<span class="btn"><img src="img/P.png"/><span>电话咨询定制</span></span>
			</div>
			
		</footer>
		
	</body>
	
	<script language="javascript">  
function checkUserNum(str){  
    if(str.length<3 || str.length>18){  
        document.getElementById("usernumErr").innerHTML = "<font color='red'>帐号长度在3-18字符内</font>";  
        form1.password.focus();  
        return false;  
    }  
     if(str.length == 0){  
        document.getElementById("usernumErr").innerHTML = "<font color='red'>用户名不能为空</font>";  
        form1.username.focus();  
        return false;  
    }  
     var flag = str.match(/\D/)==null;  
     if(!flag==true){  
         document.getElementById("usernumErr").innerHTML = "<font color='red'>帐号必须有0-9数字组成</font>";  
         form1.usernum.focus();  
         return false;  
     }  
     document.getElementById("usernumErr").innerHTML = "";  
     return true;  
};  
  
function checkUserName(username){  
    if(username.length == 0){  
        document.getElementById("usernumErr").innerHTML = "<font color='red'>用户名不能为空</font>";  
        form1.username.focus();  
        return false;  
    }  
    var patn =   /^[a-zA-Z]+[a-zA-Z0-9]+$/;  
    if(!patn.test(username)){  
        document.getElementById("usernumErr").innerHTML = "<font color='red'>用户名只能由英文字母或数字组成(不支持中文、不能以数字开头)</font>";  
        form1.username.focus();  
        return false;  
    }  
    document.getElementById("usernumErr").innerHTML = "";  
    return true;  
};  
  
function checkPwd(str){  
    if(str.length<3 || str.length>18){  
        document.getElementById("passwordErr").innerHTML = "<font color='red'>密码长度在3-18字符内</font>";  
        form1.password.focus();  
        return false;  
    }  
    if(escape(str).indexOf("%u")!=-1){  
        document.getElementById("passwordErr").innerHTML = "<font color='red'>密码不能含有中文</font>";  
        form1.password.focus();  
        return false;  
    }  
   document.getElementById("passwordErr").innerHTML = "";  
   return true;  
};  
  
function confrimPwd(str){  
    var pwd = document.form1.password.value;  
    if(str!=pwd){  
        document.getElementById("password2Err").innerHTML = "<font color='red'>密码不一致!</font>";  
        form1.password3.value="";  
        form1.password3.focus();  
        return false;  
    }  
   document.getElementById("password2Err").innerHTML = "";  
   return true;  
};  
  
function checkEmail(email){  
   if(email==""){  
      document.getElementById("emailErr").innerHTML = "<font color='red'>Email不能为空</font>";       
      form1.email.focus();            
      return false;           
   }  
   var reg=new RegExp("^[0-9a-zA-Z]+@[0-9a-zA-Z]+[\.]{1}[0-9a-zA-Z]+[\.]?[0-9a-zA-Z]+$");  
   if(!reg.test(email)){  
     document.getElementById("emailErr").innerHTML = "<font color='red'>E-MAIL格式输入不正确!</font>";  
     form1.email.focus();                 
     return false;  
   }  
          
    document.getElementById("emailErr").innerHTML = "";  
    return true;  
  
};  
  
 
  
function checkForm(){  
      
    if(document.form1.username.value.length == 0){  
        document.getElementById("usernameErr").innerHTML = "<font color='red'>用户名不能为空</font>";  
        form1.username.focus();  
        return false;  
    }  

    alert(document.form1.password.value.length );
    if(document.form1.password.value.length == 0){  
        document.getElementById("passwordErr").innerHTML = "<font color='red'>密码不能为空</font>"; 

        form1.password.focus();  
        return false;  
    }  
    
    if(document.form1.email.value==""){  
      document.getElementById("emailErr").innerHTML = "<font color='red'>Email不能为空</font>";       
      form1.email.focus();            
      return false;           
   }  
    document.getElementById("usernumErr").innerHTML = "";  
   // document.getElementById("usernameErr").innerHTML = "";  
    document.getElementById("passwordErr").innerHTML = "";  
   
    document.getElementById("emailErr").innerHTML = "";  
    return true;  
  
}; 

  
function checkForm1(){  
   // alert(document.form0.username.value.length);
  
    if(document.form0.username.value.length == 0){  
        document.getElementById("uErr").innerHTML = "<font color='red'>用户名不能为空额</font>";  
       form0.username.focus();  
      // return false;  
    }  
    //alert(document.form0.password.value.length);
    if(document.form0.password.value.length == 0){  
        document.getElementById("pErr").innerHTML = "<font color='red'>密码不能为空额</font>";  
       form0.password.focus();  
      //return false;  
    }  
   
    
    //document.getElementById("uErr").innerHTML = "";  
   // document.getElementById("pErr").innerHTML = "";  
    
    return true;  
  
};

 $("#login").on("click",function () {
 	 $.post('/login',{
 	 	username: $("#user").val(),
 	 	password: $("#pass").val()
 	 },function(data){
 	 	if( data.state == 'success') {
 	 		$(".htmleaf-container").css({"display":"none"});
 	 		$(".about").html(data.datas.username);
 	 	}else{
 	 		$(".wrong").css({"display":"block"});

 	 	}
 	 });
 })
 // checkForm1(); 
</script>
</html>
